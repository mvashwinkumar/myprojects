<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>Forgot Password</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width">
        <link type="text/css" href="/BasketApp/scripts/bootstrap/css/bootstrap_yeti.css" rel="stylesheet">
        <link type="text/css" href="/BasketApp/styles/BasketStyle.css" rel="stylesheet">
        <!----Scripts---->
        <script src="/BasketApp/scripts/jquery-1.10.2.js" type="text/javascript"></script>
        <script src="/BasketApp/scripts/bootstrap/js/bootstrap.js" type='text/javascript'></script>
        <script src="/BasketApp/scripts/handlebars-v1.3.0.js" type="text/javascript"></script>
        <script src="/BasketApp/scripts/jquery.cookie.js" type="text/javascript"></script>
        <script src="/BasketApp/scripts/jsUtil.js" type="text/javascript"></script>

        <script type="text/javascript">
            $(function() {


                includes("navbar_template", {}, "#pageNavigation");
                $("#resetBtn").click(function() {
                    var email = {email: $("#emailInput").val()};
                    $("").ajaxWrapper("api/Customer/resetPassword", success, fail, JSON.stringify(email), "application/json");
                });
                function success(data)
                {
                    if (data.error)
                    {
                        $("#msgPane").hide();
                        $("#msgPane").removeClass("alert alert-success");
                        $("#msgPane").addClass("alert").addClass("alert-warning").html("<center><span class='glyphicon glyphicon-warning-sign'></span> " + data.errorMessage + "</center>");
                        $("#msgPane").fadeIn();
                    }
                    else
                    {
                        $("#msgPane").hide();
                        $("#msgPane").removeClass("alert alert-warning");
                        $("#msgPane").addClass("alert").addClass("alert-success").html("<center><span class='glyphicon glyphicon-ok'></span> Please check your email for the new password.</center>");
                        $("#msgPane").fadeIn();
                    }
                }
                function fail(data)
                {
                    console.log("reset password failed....check. Forgotpassword.html");
                }

            })
        </script>
    

    </head>
    <body>
        <div id="pageNavigation"></div>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <br>
        <div class="row"> 
            <div class="col-lg-6 col-lg-offset-3 col-md-8 col-md-offset-2">
                <div class="well">

                    <form method="POST" action="ForgotPassword" class="bs-example form-horizontal">
                        <fieldset>
                            <legend>Forgot Password ?</legend>
                            
                            <div class="row">
                                <div class="col-xs-2"></div>
                                <div class="col-xs-8" id="msgPane"></div>                             
                                <div class="col-xs-2"></div>
                            </div>
                            
                            <div class="form-group">
                                <label for="Email" class="col-lg-3 control-label">E-mail Address : </label>
                                <div class="col-lg-7">
                                    <input type="text" class="form-control" id="emailInput" name="Email" placeholder="Enter your E-mail Address" id="EmailTxt"/>
                                </div>
                            </div>   


                            <div class="form-group">
                                <div class="col-lg-9 col-lg-offset-3">
                                    <button type="button" name="button" id="resetBtn" value="SendEmail" class="btn btn-primary">Send Password to E-mail</button>&nbsp;&nbsp;
                                    <a href="/BasketApp/store">Go to Login Page</a>
                                </div>
                            </div>
                            <hr/>
                            
                        </fieldset>
                    </form>
                </div>
            </div>
        </div>
    </body>
</html>
